# Dark/Light Theme System Plan

## 1. CSS Variable Architecture (Refactor `globals.css`)
I will introduce a `[data-theme="public"]` scope or similar to isolate the public theme variables, or better, use standard semantic names but scope their values based on `data-theme` attribute, while ensuring the dashboard (which likely relies on the current `:root` values or specific classes) remains unaffected.

However, the prompt asks for "Dark mode must be default" for the *public-facing UI*. The current `:root` seems to define a light theme (white background).
To avoid breaking the dashboard (which presumably uses these current light theme defaults), I will:
1.  Keep the existing `:root` variables as they are (Light/Dashboard default).
2.  Create a new set of variables specifically for the **Public Site** under a class or data attribute, e.g., `html[data-theme="dark"]` and `html[data-theme="light"]`.
3.  **Crucially**, the public layout will wrap its content or use specific semantic classes that leverage these new theme variables, ensuring isolation.
4.  Actually, a cleaner approach requested is "Global CSS Variable Architecture" where Dark is default for *Public*.
    *   I will define `[data-theme="dark"]` and `[data-theme="light"]`.
    *   I will set up the Public Layout to strictly use these new semantic variables (e.g., `--bg-primary`, `--text-primary`) instead of the existing `--background`, `--foreground` which seem to be used by the dashboard.
    *   This ensures complete isolation. Dashboard continues using `--background` (white), Public uses `--bg-primary` (dark/light switchable).

## 2. Theme Initialization Script
I will create a script `public-theme-init.tsx` or string to inject into the `head` of the Public Layout.
*   It will check `localStorage.getItem('theme')`.
*   Default to 'dark' if missing.
*   Set `document.documentElement.setAttribute('data-theme', theme)`.

## 3. Theme Toggle Component
*   Create `src/components/site/theme-toggle.tsx`.
*   Uses `lucide-react` Sun/Moon icons.
*   Toggles `data-theme` attribute and `localStorage`.
*   Hydration safe (mounted check).

## 4. Public Layout Refactor (`src/app/[lang]/(site)/layout.tsx`)
*   Inject the init script.
*   Add `ThemeToggle` to the Navbar (I need to find the Navbar component first, likely in `src/components/site/navbar.tsx` or inside the layout).
*   Ensure the root `div` of the public layout uses the new semantic classes (e.g., `bg-[var(--bg-primary)] text-[var(--text-primary)]`).

## 5. Component Standardization
*   I will scan `src/app/[lang]/(site)` pages and components to replace hardcoded colors (like `bg-white`, `text-gray-900`) with the new variable-based classes.
*   I'll map:
    *   `bg-white` -> `bg-[var(--surface)]` or `bg-[var(--bg-primary)]`
    *   `text-gray-900` -> `text-[var(--text-primary)]`
    *   `text-gray-500` -> `text-[var(--text-secondary)]`
    *   `border-gray-200` -> `border-[var(--border-subtle)]`

## 6. Execution Steps
1.  **Modify `globals.css`**: Add the new Public Theme variables (Dark default, Light override).
2.  **Create `ThemeToggle`**: Implement the toggle logic.
3.  **Update Public Layout**: Add script and apply base styles.
4.  **Update Navbar**: Insert the toggle.
5.  **Refactor Public Pages**: `page.tsx` files in `(site)` routes to use dynamic colors.

## Verification
*   Check Dashboard: Should remain Light (using original `:root` vars).
*   Check Public: Should be Dark by default, toggleable to Light.
*   Persistence: Reload page to verify theme sticks.
